<!-- @format -->

<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>面具</title>
  </head>
  <!-- 引入jq -->
  <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <!-- 引入动画库 -->
  <script src="https://cdn.bootcdn.net/ajax/libs/animejs/3.2.1/anime.js"></script>
  <style>
    /* 隐藏滚动条 */
    ::-webkit-scrollbar {
      display: none;
    }
    body {
      margin: 0;
      padding: 0;
      border: 0;
      /* 文字不可选中 */
      user-select: none;
    }

    .shopPage {
      margin: 40px;
      display: flex;
      flex-wrap: wrap;
      justify-content: flex-start;
      align-items: center;
      align-content: stretch;
    }

    .main {
      padding: 10px;
      display: flex;
      margin: 20px;
      justify-content: space-between;
      height: 100px;
      width: 370px;
      background-color: #ffffff;
      border-radius: 7px;
      transition: all 0.5s linear;
    }

    .main:hover {
      transform: translateY(-3px);
      box-shadow: #595959 0px 0px 10px 0px;
      transition: all 0.5s ease-out;
    }

    .imagebox {
      padding: 10px;
      height: 80%;
      width: 50%;
    }

    .title {
      padding-top: 5px;
      height: 100%;
      width: 100%;
    }

    .title_one {
      font-size: 20px;
      padding: 0 0 5px 0;
    }

    .title_two {
      color: #585858;
    }
    .modal {
      /* display: none; */
      display: flex;
      flex-direction: row-reverse;
      justify-content: center;
      align-content: center;
      flex-wrap: wrap;
      position: fixed;
      width: 100%;
      height: 100%;
      left: 0;
      top: 0;
      background-color: rgba(0, 0, 0, 0.5);
    }
    img {
      width: 60%;
    }
    .modal > div {
      width: 90%;
      height: 80%;
    }
    .shoppingDiv {
      width: 100%;
      height: 100%;
      overflow: hidden;
      overflow-y: auto;
      border-radius: 10px;
      background-color: #ffffff;
    }
    .shoppingDiv > div {
      display: flex;
      /* 最好解决方案：
      height: 98%
      padding: shoppingDiv > div高度/100% 10px shoppingDiv > div高度/100% 10px
      */
      height: 97%;
      padding: 6.2633px 10px 6.2633px 10px;
      justify-content: flex-start;
    }
    svg:hover path {
      fill: red;
    }
    .shoppingDivLeft {
      display: flex;
      flex-wrap: wrap;
      align-content: space-around;
      justify-content: center;
      width: 50%;
    }
    .shoppingDivLeftImg {
      width: 50%;
      background-color: aqua;
    }
    input[type="number"]::-webkit-inner-spin-button,
    input[type="number"]::-webkit-outer-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }
    .inputButton {
      width: 50px;
      height: 30px;
      border-radius: 5px;
      padding: 5px 10px;
      background: transparent;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      display: inline-block;
      box-shadow: inset 2px 2px 2px 0px rgba(255, 255, 255, 0.5),
        7px 7px 20px 0px rgba(0, 0, 0, 0.1), 4px 4px 5px 0px rgba(0, 0, 0, 0.1);
    }

    .inputButton {
      border: none;
      color: #000;
    }

    .inputButton:active {
      top: 2px;
    }
    .inputButton span {
      height: 12px;
    }
    input {
      width: 40px;
      text-align: center;
      border: none;
      margin: 8px;
      border-radius: 5px;
      height: 25px;
      outline: none;
    }

    .custom-btn {
      width: 130px;
      height: 40px;
      color: #fff;
      border-radius: 5px;
      padding: 10px 25px;
      font-family: "Lato", sans-serif;
      font-weight: 500;
      background: transparent;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      display: inline-block;
      box-shadow: inset 2px 2px 2px 0px rgba(255, 255, 255, 0.5),
        7px 7px 20px 0px rgba(0, 0, 0, 0.1), 4px 4px 5px 0px rgba(0, 0, 0, 0.1);
      outline: none;
    }

    /* 16 */
    .btn-16 {
      border: none;
      color: #000;
    }
    .btn-16:after {
      position: absolute;
      content: "";
      width: 0;
      height: 100%;
      top: 0;
      left: 0;
      direction: rtl;
      z-index: -1;
      box-shadow: -7px -7px 20px 0px #fff9, -4px -4px 5px 0px #fff9,
        7px 7px 20px 0px #0002, 4px 4px 5px 0px #0001;
      transition: all 0.3s ease;
    }
    .btn-16:hover {
      color: #000;
    }
    .btn-16:hover:after {
      left: auto;
      right: 0;
      width: 100%;
    }
    .btn-16:active {
      top: 2px;
    }
  </style>
  <body>
    <div class="shopPage">
      <!-- 加载自定义html -->
    </div>
    <!-- 遮罩层 -->
    <div class="modal">
      <div>
        <div style="float: right; padding-right: 10px">
          <?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
          <svg
            onclick="maskLayerControl(false)"
            t="1698938418139"
            class="icon"
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            p-id="4015"
            xmlns:xlink="http://www.w3.org/1999/xlink"
            width="30"
            height="30"
          >
            <path
              d="M512 1024A512 512 0 1 1 512 0a512 512 0 0 1 0 1024zM305.956571 370.395429L447.488 512 305.956571 653.604571a45.568 45.568 0 1 0 64.438858 64.438858L512 576.512l141.604571 141.531429a45.568 45.568 0 0 0 64.438858-64.438858L576.512 512l141.531429-141.604571a45.568 45.568 0 1 0-64.438858-64.438858L512 447.488 370.395429 305.956571a45.568 45.568 0 0 0-64.438858 64.438858z"
              fill="#DDDDDD"
              p-id="4016"
            ></path>
          </svg>
        </div>
        <div class="shoppingDiv">
          <div>
            <div class="shoppingDivLeft">
              <img class="shoppingDivLeftImg" src="./images/test/红色.jpg" />
            </div>
            <div class="shoppingDivRight">
              <div class="shoppingDivRightH">
                <h1>111</h1>
                <h6>222</h6>
              </div>
              <div>
                <button class="inputButton" id="cut" style="color: red">
                  <span> - </span>
                </button>
                <input id="num" type="text" value="1" />
                <button class="inputButton" id="add" style="color: blue">
                  <span> + </span>
                </button>
              </div>
              <div><button class="custom-btn btn-16">Read More</button></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
<script src="./js/store.js"></script>
<script>
  function purchaseQuantityButton() {
    $("#cut").click(function () {
      price = $("#num").val();
      if ($("#num").val() == 1) {
        return;
      } else {
        price--;
      }
      $("#num").val(price);
    });
    $("#add").click(function () {
      price = $("#num").val();
      price++;
      $("#num").val(price);
    });
  }
  purchaseQuantityButton();

  const JsonData = [
    {
      imagePath: "images/test/绿色.jpg",
      title: "绿色脸谱",
      data: "寓意：一般象征顽强、暴躁、典型人物：武天虬。",
    },
    {
      imagePath: "images/test/蓝色.jpg",
      title: "蓝色脸谱",
      data: "寓意：一般象征刚直、桀骜不驯、有心计。典型人物：窦尔敦。",
    },
    {
      imagePath: "images/test/金色.jpg",
      title: "金银色脸谱",
      data: "寓意：一般都是神仙、妖怪。典型人物：二郎神。",
    },
    {
      imagePath: "images/test/黄色.jpg",
      title: "黄色脸谱",
      data: "寓意：一般象征枭勇、凶猛。典型人物：宇文成都。",
    },
    {
      imagePath: "images/test/紫色.jpg",
      title: "紫色脸谱",
      data: "寓意：一般象征刚正、稳重、果断、有正义感。典型人物：廉颇、徐延昭等。",
    },
    {
      imagePath: "images/test/白色.jpg",
      title: "白色脸谱",
      data: "寓意：一般象征阴险、狡诈。典型人物：曹操。",
    },
    {
      imagePath: "images/test/黑色.jpg",
      title: "黑色脸谱",
      data: "寓意：一般象征正直、无私、刚烈，也象征粗率、鲁莽。典型人物：包拯、李逵等。",
    },
    {
      imagePath: "images/test/红色.jpg",
      title: "红色脸谱",
      data: "寓意：一般象征忠义、英勇。典型人物：关羽、姜维等。",
    },
  ];

  // 创建元素
  function creatingElements() {
    // 获取根节点
    const rootDom = document.getElementsByClassName("shopPage")[0];
    // 遍历 JosnData获取动态添加的图片地址、标题、详细信息
    for (const s of JsonData) {
      const imagePath = s["imagePath"];
      const title = s["title"];
      const data = s["data"];
      // 创建main节点
      const mainDom = document.createElement("div");
      //添加class属性
      mainDom.classList.add("main");
      // 给main节点添加点击事件
      mainDom.onclick = function goShopping() {
        // 设置需要购买的内容
        creat("itemInformation", s);
        // 显示遮罩层
        maskLayerControl(true);
        //
      };
      // 将main挂载到根节点
      rootDom.appendChild(mainDom);
      //创建imagebox节点
      const imagebox = document.createElement("div");
      // 给imagebox节点添加class
      imagebox.classList.add("imagebox");
      //创建imagebox节点下的img标签
      const imagebox_img = document.createElement("img");
      // 给img添加src
      imagebox_img.src = imagePath;
      // 将imagebox_img挂载到imagebox
      imagebox.appendChild(imagebox_img);
      // 将imagebox挂载到mainDom
      mainDom.appendChild(imagebox);
      // 创建右侧标题
      const titleDiv = document.createElement("div");
      // 添加class
      titleDiv.classList.add("title");
      // 创建标题
      const title_one_div = document.createElement("div");
      // 添加class
      title_one_div.classList.add("title_one");
      title_one_div.textContent = title;
      // 创建详细内容
      const title_two_div = document.createElement("div");
      // 添加class
      title_two_div.classList.add("title_two");
      title_two_div.textContent = data;

      //将两个title挂载到titleDiv
      titleDiv.appendChild(title_one_div);
      titleDiv.appendChild(title_two_div);
      // 将titleDiv挂载到mainDom
      mainDom.appendChild(titleDiv);
    }
  }
  creatingElements();
  // 遮罩层控制
  function maskLayerControl(result) {
    // 获取遮罩层dom节点
    const maskDom = document.getElementsByClassName("modal")[0];
    if (result) {
      maskDom.style.display = "flex";
      // 禁止浏览器滚动条滚动
      $("body").css({
        overflow: "hidden",
      });

      buildPurchasePage();
    } else {
      maskDom.style.display = "none";
      // 还原滚动
      $("body").css({
        overflow: "auto",
      });
    }
  }

  // 构建购买页面
  function buildPurchasePage() {
    $("#num").val(1);
    const data = get("itemInformation");
    // const data = {
    //   imagePath: "images/test/蓝色.jpg",
    //   title: "蓝色脸谱",
    //   data: "寓意：一般象征刚直、桀骜不驯、有心计。典型人物：窦尔敦。",
    // };
    console.log(data);
    // 获取左侧div
    const shoppingDivLeftElement =
      document.getElementsByClassName("shoppingDivLeft")[0];
    //创建img标签
    const shoppingDivLeftImg = document.createElement("img");
    shoppingDivLeftImg.classList.add("shoppingDivLeftImg");
    shoppingDivLeftImg.src = data["imagePath"];
    // 判断shoppingDivLeft是否存在子元素
    if (
      document.getElementsByClassName("shoppingDivLeft")[0].children.length < 1
    ) {
      shoppingDivLeftElement.appendChild(shoppingDivLeftImg);
    } else {
      // 删除上一个子元素
      shoppingDivLeftElement.removeChild(
        document.getElementsByClassName("shoppingDivLeftImg")[0]
      );
      // 加载新的元素
      shoppingDivLeftElement.appendChild(shoppingDivLeftImg);
    }

    // 获取右侧div
    const shoppingDivRightElement = document.getElementsByClassName(
      "shoppingDivRightElement"
    )[0];
    //创建标题标签
    const shoppingDivLeftTitle = document.createElement("text");
    //创建简介标签
    const introductionToShoppingDivLeft = document.createElement("text");
    //创建数量标签
    const shoppingDivLeftQuantity = document.createElement("img");
    //创建购买按钮
    const shoppingDivLeftPurchaseButton = document.createElement("button");
  }
</script>
